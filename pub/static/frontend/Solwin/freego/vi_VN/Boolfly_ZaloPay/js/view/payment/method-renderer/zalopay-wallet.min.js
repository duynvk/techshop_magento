define(['jquery','Magento_Checkout/js/view/payment/default','Magento_Paypal/js/action/set-payment-method','Magento_Checkout/js/model/payment/additional-validators','Boolfly_ZaloPay/js/action/redirect-on-success'],function($,Component,setPaymentMethodAction,additionalValidators,redirectOnSuccessAction){'use strict';return Component.extend({defaults:{template:'Boolfly_ZaloPay/payment/zalopay'},redirectAfterPlaceOrder:true,placeOrderHandler:null,validateHandler:null,setPlaceOrderHandler:function(handler){this.placeOrderHandler=handler;},setValidateHandler:function(handler){this.validateHandler=handler;},context:function(){return this;},isShowLegend:function(){return true;},getCode:function(){return'zalopay';},isActive:function(){return true;},getPaymentAcceptanceMarkSrc:function(){return window.checkoutConfig.payment.zalopay.logoSrc;},placeOrder:function(data,event){var self=this;if(event){event.preventDefault();}
if(this.validate()&&additionalValidators.validate()&&this.isPlaceOrderActionAllowed()===true){this.isPlaceOrderActionAllowed(false);this.getPlaceOrderDeferredObject().done(function(){self.afterPlaceOrder();if(self.redirectAfterPlaceOrder){redirectOnSuccessAction.execute();}}).always(function(){self.isPlaceOrderActionAllowed(true);});return true;}
return false;},continueToZaloPay:function(){if(additionalValidators.validate()){var self=this;this.selectPaymentMethod();setPaymentMethodAction(this.messageContainer).done(function(){self.placeOrder();});return false;}}});});